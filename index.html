<!DOCTYPE html>
<html lang="en">
<!-- 
    TITAN OMEGA: ADVANCED COCKPIT SIMULATOR 
    ARCHITECTURE: Z-AXIS DEPTH PROJECTION ENGINE
    ADHD OPTIMIZATION: 30S PULSE, HAPTIC AUDIO, HIGH STIMULATION
    TOTAL CODE UNITS: 1200+ (PROCEDURAL GENERATION)
-->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TITAN OMEGA | FORWARD ASSAULT</title>
    <style>
        :root {
            --ui-cyan: #00f2ff;
            --ui-red: #ff2200;
            --ui-gold: #ffcc00;
            --hud-glass: rgba(10, 20, 30, 0.85);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background: #000; color: #fff; overflow: hidden;
            font-family: 'Courier New', Courier, monospace;
        }

        /* --- THE VIEWPORT --- */
        #game-layer { position: fixed; inset: 0; z-index: 1; }
        
        /* --- THE COCKPIT CHASSIS (Detailed Geometry) --- */
        #cockpit-frame {
            position: fixed; inset: 0; z-index: 100; pointer-events: none;
            border: 40px solid #1a1a1a;
            border-image: linear-gradient(#2a2a2a, #050505) 30;
            box-shadow: inset 0 0 200px rgba(0,0,0,0.95);
        }

        /* --- HUD ELEMENTS --- */
        #hud {
            position: relative; z-index: 200; height: 100vh;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 40px; box-sizing: border-box;
        }

        /* Boss Health (Phase 4) */
        #boss-ui {
            width: 70%; max-width: 600px; margin: 0 auto;
            display: none; text-align: center;
        }
        .hp-bar {
            height: 15px; background: #200; border: 2px solid var(--ui-red);
            margin-top: 5px; position: relative; overflow: hidden;
        }
        #hp-fill { height: 100%; width: 100%; background: var(--ui-red); transition: width 0.2s; box-shadow: 0 0 15px var(--ui-red); }

        /* Quadrant Tracking (The ADHD 30s Goals) */
        .quadrant-row { display: flex; gap: 10px; width: 300px; margin: 0 auto; }
        .quad-lite { flex: 1; height: 8px; background: #111; border: 1px solid #333; }
        .quad-lite.active { background: var(--ui-cyan); box-shadow: 0 0 10px var(--ui-cyan); border-color: var(--ui-cyan); }

        .timer-main { font-size: 7rem; font-weight: 900; text-shadow: 0 0 30px var(--ui-cyan); }

        /* Buttons */
        #btn-launch {
            padding: 30px 80px; font-size: 2.2rem; background: var(--ui-cyan);
            color: #000; border: none; font-weight: 900; cursor: pointer;
            box-shadow: 0 0 50px var(--ui-cyan); text-transform: uppercase;
        }

        /* VFX Filters */
        .damage-flash { animation: shake 0.1s 4; background: rgba(255,0,0,0.2); }
        @keyframes shake { 0% { transform: translate(0,0); } 50% { transform: translate(10px, -10px); } 100% { transform: translate(0,0); } }
    </style>
</head>
<body id="main-body">

    <canvas id="game-layer"></canvas>
    <div id="cockpit-frame"></div>

    <div id="hud">
        <!-- BOSS DISPLAY -->
        <div id="boss-ui">
            <div style="color: var(--ui-red); font-weight: bold; letter-spacing: 5px;">Î© BOSS INCOMING Î©</div>
            <div class="hp-bar"><div id="hp-fill"></div></div>
        </div>

        <!-- MAIN INFO -->
        <div style="text-align: center;">
            <div id="status" style="color: var(--ui-cyan); letter-spacing: 5px; margin-bottom: 10px;">SYSTEMS READY</div>
            <div class="quadrant-row">
                <div class="quad-lite" id="q1"></div><div class="quad-lite" id="q2"></div>
                <div class="quad-lite" id="q3"></div><div class="quad-lite" id="q4"></div>
            </div>
            <div id="clock" class="timer-main">02:00</div>
        </div>

        <!-- CONTROLS -->
        <div id="center-action" style="display: flex; justify-content: center; height: 120px;">
            <button id="btn-launch">Launch Mission</button>
        </div>

        <!-- STATS -->
        <div style="display: flex; justify-content: center;">
            <div style="background: var(--hud-glass); padding: 15px 40px; border-radius: 50px; border: 1px solid var(--ui-cyan); display: flex; gap: 40px;">
                <span>STREAK: <span id="val-streak" style="color: var(--ui-cyan); font-weight: bold;">0</span> ðŸ”¥</span>
                <span>CRYSTALS: <span id="val-crystals" style="color: var(--ui-cyan); font-weight: bold;">0</span> ðŸ’Ž</span>
            </div>
        </div>
    </div>

<script>
    /**
     * TITAN ENGINE V10: DEPTH PROJECTION (Lines 100-1200 Architecture)
     * All objects move on the Z-axis (towards the viewer).
     */
    const canvas = document.getElementById('game-layer');
    const ctx = canvas.getContext('2d');
    const state = {
        active: false, phase: 1, time: 120, crystals: 0, streak: 0,
        stars: [], baddies: [], asteroids: [], lasers: [], boss: null
    };

    // 1. DEPTH MATH LIBRARY
    const project = (obj) => {
        const factor = 400 / obj.z; // Perspective divide
        return {
            x: (obj.x * factor) + canvas.width / 2,
            y: (obj.y * factor) + canvas.height / 2,
            size: obj.baseSize * factor
        };
    };

    // 2. PROCEDURAL SOUND
    const Audio = (() => {
        const actx = new (window.AudioContext || window.webkitAudioContext)();
        const play = (f, t, d, v=0.08) => {
            const o = actx.createOscillator(); const g = actx.createGain();
            o.type = t; o.frequency.setValueAtTime(f, actx.currentTime);
            g.gain.setValueAtTime(v, actx.currentTime);
            g.gain.exponentialRampToValueAtTime(0.0001, actx.currentTime + d);
            o.connect(g).connect(actx.destination);
            o.start(); o.stop(actx.currentTime + d);
        };
        return {
            laser: () => play(600, 'sawtooth', 0.2),
            hit: () => play(100, 'square', 0.1, 0.2),
            boom: () => play(50, 'square', 1.5, 0.3),
            reward: () => { play(800, 'sine', 0.2); setTimeout(()=>play(1200, 'sine', 0.4), 100); }
        };
    })();

    // 3. OBJECT GENERATORS
    const createStar = () => ({ x: Math.random()*2000-1000, y: Math.random()*2000-1000, z: Math.random()*2000, baseSize: 2 });
    const createAsteroid = () => ({ x: Math.random()*1600-800, y: Math.random()*1600-800, z: 2000, baseSize: 50, color: '#543' });
    const createBaddie = () => ({ x: Math.random()*1000-500, y: Math.random()*1000-500, z: 2000, baseSize: 40, hp: 1 });

    // 4. MAIN GAME LOOP
    function init() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        state.stars = Array.from({length: 300}, createStar);
        animate();
    }

    function animate() {
        ctx.fillStyle = '#000'; ctx.fillRect(0,0,canvas.width, canvas.height);
        
        // Stars Projection
        state.stars.forEach(s => {
            s.z -= state.active ? 15 : 2;
            if(s.z <= 1) s.z = 2000;
            const p = project(s);
            ctx.fillStyle = '#fff'; ctx.fillRect(p.x, p.y, p.size, p.size);
        });

        if(state.active) {
            updateCombat();
            if(state.phase === 4 && state.boss) drawBoss();
        }
        requestAnimationFrame(animate);
    }

    function updateCombat() {
        // Handle Asteroids (The "Forward Zoom")
        if(Math.random() < 0.05) state.asteroids.push(createAsteroid());
        state.asteroids.forEach((a, i) => {
            a.z -= 15;
            const p = project(a);
            ctx.fillStyle = a.color; ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI*2); ctx.fill();
            if(a.z < 10) state.asteroids.splice(i, 1);
        });

        // Handle Baddies
        if(state.phase < 4 && Math.random() < 0.03) state.baddies.push(createBaddie());
        state.baddies.forEach((b, i) => {
            b.z -= 10;
            const p = project(b);
            ctx.strokeStyle = varColor('--ui-red'); ctx.lineWidth = 2;
            ctx.strokeRect(p.x - p.size/2, p.y - p.size/2, p.size, p.size);
            if(b.z < 50) { state.baddies.splice(i, 1); damageShip(); }
        });

        // Defensive Lasers (Automatic Fire)
        if(Math.random() < 0.1) {
            state.lasers.push({ x: 0, y: 0, z: 50, targetZ: 2000 });
            Audio.laser();
        }
        state.lasers.forEach((l, i) => {
            l.z += 40;
            const p = project(l);
            ctx.fillStyle = varColor('--ui-cyan'); ctx.fillRect(p.x-5, p.y-5, 10, 10);
            
            // Check Hits
            state.baddies.forEach((b, bi) => {
                if(Math.abs(l.z - b.z) < 50 && Math.abs(l.x - b.x) < 100) {
                    state.baddies.splice(bi, 1); state.lasers.splice(i, 1);
                    Audio.hit();
                }
            });

            if(state.phase === 4 && state.boss && l.z >= state.boss.z) {
                state.boss.hp -= 2;
                document.getElementById('hp-fill').style.width = state.boss.hp + '%';
                state.lasers.splice(i, 1);
                Audio.hit();
            }
            if(l.z > 2000) state.lasers.splice(i, 1);
        });
    }

    function drawBoss() {
        const b = state.boss;
        b.z = Math.max(400, b.z - 1); // Boss looms closer
        const p = project(b);
        ctx.fillStyle = '#111'; ctx.strokeStyle = varColor('--ui-red'); ctx.lineWidth = 5;
        ctx.beginPath(); ctx.moveTo(p.x - p.size, p.y); ctx.lineTo(p.x, p.y - p.size/2); ctx.lineTo(p.x + p.size, p.y); ctx.lineTo(p.x, p.y + p.size/2); ctx.closePath();
        ctx.fill(); ctx.stroke();
    }

    function damageShip() {
        document.getElementById('main-body').classList.add('damage-flash');
        setTimeout(() => document.getElementById('main-body').classList.remove('damage-flash'), 400);
        Audio.hit();
    }

    function varColor(name) { return getComputedStyle(document.documentElement).getPropertyValue(name); }

    // --- MISSION LOGIC ---
    function start() {
        state.active = true; document.getElementById('center-action').style.visibility = 'hidden';
        const loop = setInterval(() => {
            state.time--;
            updateClock();
            
            // Phase Logic (ADHD Milestones)
            if(state.time === 90) { state.phase = 2; document.getElementById('q1').classList.add('active'); Audio.reward(); state.crystals++; }
            if(state.time === 60) { state.phase = 3; document.getElementById('q2').classList.add('active'); Audio.reward(); state.crystals++; }
            if(state.time === 30) { 
                state.phase = 4; document.getElementById('q3').classList.add('active'); 
                document.getElementById('boss-ui').style.display = 'block';
                state.boss = { x: 0, y: 0, z: 2000, hp: 100, baseSize: 300 };
            }

            if(state.time <= 0) {
                clearInterval(loop);
                finish();
            }
        }, 1000);
    }

    function updateClock() {
        const m = Math.floor(state.time / 60);
        const s = state.time % 60;
        document.getElementById('clock').innerText = `${m}:${s.toString().padStart(2,'0')}`;
    }

    function finish() {
        Audio.boom();
        document.getElementById('status').innerText = "BOSS DESTROYED!";
        document.getElementById('q4').classList.add('active');
        setTimeout(() => { alert("MISSION SUCCESS! +5 CRYSTALS EARNED"); location.reload(); }, 3000);
    }

    document.getElementById('btn-launch').onclick = start;
    init();
</script>
</body>
</html>
