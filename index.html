<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TITAN OMEGA: NEURAL LINK</title>
    <style>
        :root { --p1: #081820; --p2: #346856; --p3: #88c070; --p4: #e0f8d0; --cyan: #00ffff; --gold: #ffd700; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; height: 100vh; display: flex; flex-direction: column; align-items: center; }
        
        /* Tactical Dashboard Layout */
        #game-header { width: 100%; height: 80px; text-align: center; border-bottom: 2px solid var(--p2); background: #111; z-index: 50; }
        #game-title { font-size: 22px; color: var(--gold); margin-top: 10px; text-shadow: 0 0 10px var(--gold); }
        #big-timer { font-size: 38px; font-weight: 900; color: #fff; }

        #viewport-container { position: relative; width: 100vw; height: calc(100vh - 200px); max-width: 430px; background: #000; border: 4px solid #333; overflow: hidden; }
        canvas { width: 100%; height: 100%; image-rendering: pixelated; }

        #game-footer { width: 100%; height: 120px; background: #111; border-top: 2px solid var(--p2); display: flex; justify-content: space-around; align-items: center; padding: 10px 0; }
        .stat-box { text-align: center; font-size: 14px; color: var(--p4); }
        .stat-val { font-size: 20px; font-weight: bold; color: var(--gold); }

        /* Star Wars Intro */
        #intro { position: absolute; inset: 0; background: #000; z-index: 1000; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .crawl-wrap { width: 80%; height: 60%; perspective: 300px; overflow: hidden; }
        .crawl-content { position: absolute; top: 100%; text-align: justify; color: var(--gold); font-size: 28px; line-height: 1.5; animation: crawlAnim 25s linear forwards; }
        @keyframes crawlAnim { 0% { transform: rotateX(25deg) translateY(0); } 100% { transform: rotateX(25deg) translateY(-2500px); } }

        /* Health Bar */
        #boss-ui { position: absolute; top: 100px; width: 100%; text-align: center; z-index: 10; }
        #health-outer { width: 80%; height: 20px; border: 2px solid #fff; margin: 5px auto; background: #300; }
        #health-inner { height: 100%; background: linear-gradient(90deg, #f00, #f80); width: 100%; transition: width 0.3s; }

        .btn { background: var(--p2); border: 2px solid var(--p4); color: #fff; padding: 12px 24px; cursor: pointer; text-transform: uppercase; margin: 5px; }
        #name-entry { position: absolute; inset: 0; background: #000; z-index: 1100; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        input { background: #111; border: 2px solid var(--cyan); color: var(--cyan); padding: 15px; font-size: 24px; text-align: center; margin-bottom: 20px; }
    </style>
</head>
<body>

<div id="name-entry">
    <h1 style="color:var(--cyan)">SYNC NEURAL LINK</h1>
    <input type="text" id="pName" placeholder="ENTER NAME" maxlength="8">
    <button class="btn" onclick="savePilot()">Initialize</button>
</div>

<div id="intro" style="display:none">
    <div class="crawl-wrap">
        <div class="crawl-content">
            IT IS A PERIOD OF ORAL CHAOS. THE EVIL CYBORG SENTINEL HAS INVADED THE MOUTH GALAXY. 
            EQUIPPED WITH THE OMEGA-BRUSH, YOU ARE THE LAST HOPE. 
            FLY INTO THE DEEP GAPS AND SCRUB AWAY THE DARKNESS. 
            TWO MINUTES OF POWER-BRUSHING WILL DESTROY THE MACHINE CORE FOREVER...
        </div>
    </div>
    <button class="btn" style="position:fixed; bottom:50px;" onclick="startBattle()">SKIP TO BATTLE</button>
</div>

<div id="game-header">
    <div id="game-title">TITAN OMEGA: BATTLE MODE</div>
    <div id="big-timer">02:00</div>
</div>

<div id="boss-ui">
    <div style="font-size:12px; color:red; font-weight:bold;">CYBORG SENTINEL HP</div>
    <div id="health-outer"><div id="health-inner"></div></div>
</div>

<div id="viewport-container">
    <canvas id="stage"></canvas>
</div>

<div id="game-footer">
    <div class="stat-box">PILOT<br><span class="stat-val" id="ui-name">---</span></div>
    <div class="stat-box">STREAK<br><span class="stat-val" id="ui-streak">0</span></div>
    <div class="stat-box">CRYSTALS<br><span class="stat-val" id="ui-cry">0</span></div>
    <div style="display:flex; flex-direction:column;">
        <button class="btn" style="padding:5px 10px; font-size:10px;" onclick="togglePause()">Pause</button>
        <button class="btn" style="padding:5px 10px; font-size:10px;" onclick="location.reload()">Reset</button>
    </div>
</div>

<script>
/** 
 * PREMIUM OMEGA ENGINE
 */
const cv = document.getElementById('stage');
const ctx = cv.getContext('2d');
let pilot = "PILOT";

let s = {
    active: false, paused: false, t: 120, start: 0, f: 0,
    cry: parseInt(localStorage.getItem('gba_crystals_v1')) || 0,
    str: parseInt(localStorage.getItem('gba_streak_v1')) || 0,
    stars: [], lasers: [], p: []
};

function savePilot() {
    pilot = document.getElementById('pName').value || "PILOT";
    document.getElementById('ui-name').innerText = pilot.toUpperCase();
    document.getElementById('ui-cry').innerText = s.cry;
    document.getElementById('ui-streak').innerText = s.str;
    document.getElementById('name-entry').style.display = 'none';
    document.getElementById('intro').style.display = 'flex';
}

function startBattle() {
    document.getElementById('intro').style.display = 'none';
    cv.width = 430; cv.height = 700;
    for(let i=0; i<60; i++) s.stars.push({x: Math.random()*430, y: Math.random()*700, v: Math.random()*8+2});
    s.active = true; s.start = performance.now();
    requestAnimationFrame(loop);
}

function togglePause() { s.paused = !s.paused; if(!s.paused) s.start = performance.now() - (120 - s.t)*1000; }

function drawMegaMan(x, y) {
    ctx.fillStyle = '#00f'; ctx.fillRect(x, y, 40, 50); // Body
    ctx.fillStyle = '#0ff'; ctx.fillRect(x+5, y+5, 30, 15); // Visor
    ctx.fillStyle = '#fff'; ctx.fillRect(x+40, y+25, 20, 10); // Cannon
    if(s.f % 10 === 0) {
        ctx.fillStyle = '#fff'; ctx.fillRect(x+60, y+20, 10, 20); // Muzzle
        s.lasers.push({x: x+60, y: y+30});
    }
}

function drawCyborg(x, y) {
    const stage = Math.min(3, Math.floor((120-s.t)/30));
    ctx.fillStyle = stage > 1 ? '#444' : '#888';
    ctx.fillRect(x, y, 100, 100); // Main head
    ctx.fillStyle = s.f % 20 < 10 ? 'red' : '#300';
    ctx.fillRect(x+20, y+20, 20, 20); ctx.fillRect(x+60, y+20, 20, 20); // Eyes
    if(stage > 2) { // Damage effects
        ctx.fillStyle = 'orange'; ctx.fillRect(x+Math.random()*80, y+Math.random()*80, 10, 10);
    }
}

function loop(now) {
    if(!s.active) return;
    if(!s.paused) {
        s.t = 120 - (now - s.start)/1000;
        if(s.t <= 0) return win();
    }
    s.f++;

    // Update Dashboard UI
    const m = Math.floor(s.t/60); const sec = Math.floor(s.t%60);
    document.getElementById('big-timer').innerText = `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
    document.getElementById('health-inner').style.width = (s.t/120)*100 + "%";

    ctx.fillStyle = '#081820'; ctx.fillRect(0,0,430,700);

    // Zooming Space Stars
    s.stars.forEach(st => {
        st.y += st.v; if(st.y > 700) st.y = -10;
        ctx.fillStyle = '#fff'; ctx.fillRect(st.x, st.y, 2, 2);
    });

    const bx = 165 + Math.sin(s.f*0.03)*50, by = 150 + Math.cos(s.f*0.02)*20;
    drawCyborg(bx, by);
    drawMegaMan(195 + Math.sin(s.f*0.04)*30, 550);

    // Lasers
    s.lasers.forEach((l, i) => {
        l.y -= 15; ctx.fillStyle = '#0ff'; ctx.fillRect(l.x, l.y, 4, 15);
        if(l.y < 0) s.lasers.splice(i, 1);
    });

    requestAnimationFrame(loop);
}

function win() {
    s.active = false; s.cry += 100; s.str += 1;
    localStorage.setItem('gba_crystals_v1', s.cry);
    localStorage.setItem('gba_streak_v1', s.str);
    alert("MISSION COMPLETE: 100 CRYSTALS SYNCED!");
    location.reload();
}
</script>
</body>
</html>
